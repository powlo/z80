; *******************************
; Z80 Assembler Test Cases
; to verify vhdl model
; *******************************
; Test purpose:
; This test targets the xor
; instructions.

	.area	CODE (ABS)
	.org	#0H0000	

	ld	a,#0H00
	ld	b,#0H00
	ld	c,#0H00
	ld	d,#0H00
	ld	e,#0H00
	ld	h,#0H00
	ld	l,#0H00

;-------------------------------------------------
; XOR A, A
;-------------------------------------------------
	ld	a,#0HAA		; Bitwise check of and fucntion
	xor	a
	;-------------------------------------------------
	jp	nz,	fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H00
	jp	nz,	fail

;-------------------------------------------------
; XOR A, B
;-------------------------------------------------
	ld	a,#0HAA		
	ld	b,#0HCC
	xor	b
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, C
;-------------------------------------------------
	ld	b,#0H00
	ld	a,#0HAA		
	ld	c,#0HCC
	xor	c
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, D
;-------------------------------------------------
	ld	c,#0H00
	ld	a,#0HAA		
	ld	d,#0HCC
	xor	d
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, E
;-------------------------------------------------
	ld	d,#0H00
	ld	a,#0HAA		
	ld	e,#0HCC
	xor	e
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, H
;-------------------------------------------------
	ld	e,#0H00
	ld	a,#0HAA		
	ld	h,#0HCC
	xor	h
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, L
;-------------------------------------------------
	ld	h,#0H00
	ld	a,#0HAA		
	ld	l,#0HCC
	xor	l
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, (HL)
;-------------------------------------------------
	ld	hl,#0H2001
	ld	a,#0HAA		
	ld	(hl),#0HCC
	xor	(hl)
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, (IX+d)
;-------------------------------------------------
	ld	ix,#0H2021
	ld	a,#0HAA		
	ld	0H3(ix),#0HCC
	xor	0H3(ix)
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, (IY+d)
;-------------------------------------------------
	ld	iy,#0H2031
	ld	a,#0HAA		
	ld	0H4(iy),#0HCC
	xor	0H4(iy)
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; XOR A, <immediate>
;-------------------------------------------------
	ld	h,#0H00
	ld	l,#0H00
	ld	a,#0HAA		
	xor	#0HCC
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H66
	jp	nz,	fail

;-------------------------------------------------
; Now test XOR can generate flags correctly using 
; registers A and B
;-------------------------------------------------
	ld	a,#0H01
	ld	b,#0H01
	xor	b			; Should give z,pe,p
	;-------------------------------------------------
	jp	nz,	fail			; flag check
	jp	c,		fail			
	jp	po,	fail			
	jp	m,		fail			
	;-------------------------------------------------
	cp	#0H00
	jp	nz,	fail

	ld	a,#0H80
	ld	b,#0H00
	xor	b			; Should give nz,po,m
	;-------------------------------------------------
	jp	z,		fail			; flag check
	jp	c,		fail			
	jp	pe,	fail			
	jp	p,		fail			
	;-------------------------------------------------
	cp	#0H80
	jp	nz,	fail
	
pass:
	ld	a,#0H55
	ld	(#0H2000),a

	jp		pass
	
fail:
	
	ld	a,#0HAA
	ld	(#0H2000),a
	jp		fail

